---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Sidebar from '../components/Sidebar.astro';
import CardIndex from '../components/CardIndex.astro';
import SkillCategory from '../components/SkillCategory.astro';
import Social from '../components/Social.astro';
import { getCollection, type CollectionEntry } from 'astro:content';
import '../styles/global.css';
import '../styles/sidebar.css';
import { socials, cards, skills, navItems } from '../content/data/db';

type Project = CollectionEntry<'projects'>;

const projects: Project[] = await getCollection('projects');
---

<Layout>
  <Header />
  <div class="flex">
    <Sidebar />
    <main class="flex-1 p-4">
      <section>
        <h2>Sobre MÃ­</h2>
        <div class="grid gap-6 md:grid-cols-2">
          {cards.map((card, index) => (
            <CardIndex
              title={card.title}
              description={card.description}
            />
          ))}
        </div>
      </section>

      <section>
        <h2>Proyectos Destacados</h2>
        <div class="grid gap-6 md:grid-cols-2">
          {projects.map((project: Project) => (
            <CardIndex
              title={project.data.title}
              description={project.data.description}
              icon={project.data.icon}
              href={`/projects/${project.slug}`}
            />
          ))}
        </div>
      </section>

      <section>
        <SkillCategory 
          name="Habilidades"
          name_en="Skills"
          skills={skills}
        />
      </section>
    </main>
  </div>

  <div class="mt-12 flex justify-center space-x-6">
    {socials.map((social) => (
      <Social
        name={social.name}
        url={social.url}
        icon={social.icon}
      />
    ))}
  </div>

  <footer>
    <p>Contacto: <a href="mailto:cizaguirre056@gmail.com">cizaguirre056@gmail.com</a></p>
    <p>
      <a href="https://github.com/LLTKOJI" target="_blank" style="color: white; text-decoration: none;">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733609.png" alt="GitHub" width="24" style="vertical-align: middle;" /> GitHub
      </a>
    </p>
  </footer>
</Layout>
